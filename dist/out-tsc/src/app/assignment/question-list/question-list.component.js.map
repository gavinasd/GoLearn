{"version":3,"file":"question-list.component.js","sourceRoot":"","sources":["../../../../app/assignment/question-list/question-list.component.ts"],"names":[],"mappings":"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","sourcesContent":["import {Component, OnInit, OnDestroy, ElementRef} from '@angular/core';\nimport {Params, ActivatedRoute} from \"@angular/router\";\nimport {ResponseToQuestion} from \"../../models/models\";\nimport {HttpService} from \"../../services/http.service\";\nimport {AssignmentService} from \"../../services/assignment.service\";\nimport {ToastService} from \"../../services/toast.service\";\n\n@Component({\n  selector: 'app-question-list',\n  templateUrl: 'question-list.component.html',\n  styleUrls: ['question-list.component.css']\n})\nexport class QuestionListComponent implements OnInit {\n\tprivate assignmentId:string;\n\tprivate assignmentName:string;\n\tprivate classId:string;\n\tprivate index:number;\n\tprivate questionListLength:number;\n\tprivate answer:string;\n\n  \tconstructor(private route:ActivatedRoute,\n\t\t\t\tprivate toastService:ToastService,\n\t\t\t\tprivate httpService:HttpService,\n\t\t\t\tprivate assignmentService:AssignmentService,\n                private elementRef: ElementRef) {\n\t\tthis.route.params.forEach((param:Params)=>{\n\t\t\tthis.classId = param['classId'];\n\t\t\tthis.assignmentId = param['assignmentId'];\n\t\t});\n  \t}\n\n  \tngOnInit() {\n\t\tthis.assignmentService.getQuestionListByAssignment(this.assignmentId);\n\t\tthis.assignmentService.questionList.subscribe((questionList)=>{\n\t\t\tthis.questionListLength = questionList.length;\n\t\t});\n\t    this.assignmentService.getAssignmentName(this.assignmentId)\n            .subscribe((assignmentName)=>{\n\t    \t\tconsole.log(\"assignmentName\",assignmentName);\n\t            this.assignmentName = assignmentName;\n            },(err)=>{\n\t            console.log(err);\n            });\n\n        this.assignmentService.index.subscribe((index:number)=>{\n            console.log(\"index\",\"subscribe:\"+ index);\n            this.index = index;\n        });\n    }\n\n\tnextQuestion(){\n        this.confirmAnswer(this.answer);\n\t\tthis.assignmentService.changeIndex.next(true);\n\t}\n\n\tpreQuestion(){\n\t\tthis.assignmentService.changeIndex.next(false);\n\t}\n\n    changeAnswer(answer:string){\n\t    this.answer = answer;\n    }\n\n  \tconfirmAnswer(answer:string){\n\t    if(!answer || answer.length == 0){\n\t        return;\n        }\n  \t\tvar response:ResponseToQuestion = new ResponseToQuestion({\n  \t\t\tcreator: this.httpService.getCurrentId(),\n\t\t\tclass:this.classId,\n\t\t\tassignment:this.assignmentId,\n\t\t\tquestion:this.assignmentService.currentQuestionId,\n\t\t\tcontent:answer\n\t\t});\n  \t\tconsole.log(response);\n\t\tthis.assignmentService.addResponseToQuestion(response)\n\t\t\t.subscribe(\n\t\t\t\t(response)=>{\n                    //因为已经向后台提交了新的数据，所以应该重新拉一次数据\n                    //this.assignmentService.refreshQuestionList(this.assignmentId);\n                },\n                    (error:string)=>{\n                        console.log(error);\n                        this.toastService.error(error);\n                    }\n                );\n\t}\n\n}"]}